<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.study.member.dao.IMemberDao">

    <select id="getMemberList" resultType="com.study.member.vo.MemberVO">
        SELECT
               mem_id                                   ,mem_pass  , mem_name
             , TO_CHAR(mem_bir, 'YYYY-MM-DD') AS mem_bir, mem_zip  , mem_add1
             , mem_add2                                 , mem_hp   , mem_mail
             , mem_job                                  , mem_hobby, mem_mileage
             , b.comm_nm AS mem_job_nm
             , c.comm_nm AS mem_hobby_nm
             , mem_del_yn
        FROM
            member a, comm_code b, comm_code c
        WHERE mem_del_yn = 'N'
        AND a.mem_job=b.comm_cd
        AND a.mem_hobby= c.comm_cd
    </select>

    <select id="getMember" resultType="com.study.member.vo.MemberVO" parameterType="string">
        SELECT mem_id
             , mem_pass
             , mem_name
             , TO_CHAR(mem_bir, 'YYYY-MM-DD') AS mem_bir
             , mem_zip
             , mem_add1
             , mem_add2
             , mem_hp
             , mem_mail
             , mem_job
             , mem_hobby
             , mem_mileage
             , b.comm_nm                      AS mem_job_nm
             , c.comm_nm                      AS mem_hobby_nm
             , mem_del_yn
        FROM
            member a, comm_code b, comm_code c
        WHERE mem_id = #{memId}
          AND a.mem_job=b.comm_cd
          AND a.mem_hobby= c.comm_cd
    </select>

    <update id="updateMember" parameterType="com.study.member.vo.MemberVO">
        UPDATE member
        SET
            mem_name = #{memName}
          , mem_zip = #{memZip}
          , mem_add1 = #{memAdd1}
          , mem_add2 = #{memAdd2}
          , mem_bir = #{memBir}
          , mem_mail = #{memMail}
          , mem_hp = #{memHp}
          , mem_job = #{memJob}
          , mem_hobby = #{memHobby}
        WHERE mem_id = #{memId}
    </update>

    <update id="deleteMember" parameterType="com.study.member.vo.MemberVO">
        UPDATE member
        SET mem_del_yn = 'Y'
        WHERE mem_id = #{memId}
    </update>

    <insert id="insertMember" parameterType="com.study.member.vo.MemberVO">
        INSERT INTO member (
            mem_id      ,  mem_pass     ,  mem_name     ,
            mem_bir     ,  mem_zip      ,  mem_add1     ,
            mem_add2    ,  mem_hp       ,  mem_mail     ,
            mem_job     ,  mem_hobby    ,  mem_mileage  ,
            mem_del_yn
        ) VALUES (
            #{memId}    ,  #{memPass}   , #{memName}    ,
            #{memBir}   ,  #{memZip}    , #{memAdd1}    ,
            #{memAdd2}  ,  #{memHp}     , #{memMail}    ,
            #{memJob}   ,  #{memHobby}  , 0             ,
            'N'
        )
    </insert>

</mapper>